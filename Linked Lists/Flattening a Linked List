class Solution {
  public:
    Node *flatten(Node *root) {
        if(root==NULL) return NULL;
        
        vector<int>arr;
        
        Node* horizontal=root;
        while(horizontal){
            Node* vertical=horizontal;
            while(vertical){
                arr.push_back(vertical->data);
                vertical=vertical->bottom;
            }
            horizontal=horizontal->next;
        }
        
        sort(arr.begin(),arr.end());
        
        Node* head=new Node(arr[0]);
        Node* temp=head;
        
        for(int i=1; i<arr.size(); i++){
            temp->bottom=new Node(arr[i]);
            temp=temp->bottom;
        }
        return head;
    }
};
